<!DOCTYPE html>
<html lang="en" class="h-100">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  ${HTML_HEAD_TOP}

  <title>${LOC:html.authorize.authorizing_app} | Mc-Auth.com</title>

  ${HTML_HEAD_BOTTOM}

  <script>
    // Force page-reload when using browser-pageinator to get to this page (regenerate Grant-ID)
    window.addEventListener('pageshow', (e) => {
      if (historyTraversal = e.persisted ||
        (window.performance &&
          window.performance.navigation.type === 2)) {
        window.location.reload();
      }
    });
  </script>
</head>

<body class="d-flex flex-column h-100 ?{DarkTheme:dark-body text-light?:?}">
  ${HTML_HEADER}

  <main style="margin-bottom: 2rem">
    <div class="container-fluid text-center">
      <h2>
        <u>${LOC:html.authorize.login_request_from_app}</u>
      </h2>

      <div class="row">
        <div class="col"></div>

        <div class="col-auto">
          <div class="appCard">
            <div class="row">
              <div class="col-2">
                <img src="${APP_ICON}" class="img-fluid" style="max-height: 128px; max-width: 128px;"
                  alt="${LOC:html.authorize.app_logo}">
              </div>

              <div class="col-1"></div>

              <div class="col">
                <p class="text-center">${APP_DESCRIPTION}</p>
                <hr>
                <p>
                  <strong>${LOC:html.authorize.app_owner}:</strong> ${APP_OWNER_NAME}
                  <br>
                  <strong>${LOC:html.authorize.app_created_on}:</strong> ${APP_PUBLISHED}
                </p>
              </div>
            </div>

            <div class="row">
              <div class="col-3"></div>

              <div class="col">
                <hr>
              </div>
            </div>

            <div class="row">
              <div class="col-2">
                <img src="https://minotar.net/helm/${Minecraft_UUID}/128.png" class="img-fluid"
                  style="max-height: 128px; max-width: 128px;" alt="${LOC:html.authorize.your_minecraft_skin}">
              </div>

              <div class="col-1"></div>

              <div class="col">
                <p class="text-center"><strong>${LOC:html.authorize.app_wants_access_to}</strong></p>

                <ul>
                  <li>
                    <p class="text-left">
                      ${LOC:html.authorize.scope.profile}
                      <br>
                      <em class="text-muted">${LOC:html.authorize.scope.profile.note}</em>
                    </p>
                  </li>
                </ul>
              </div>
            </div>

            <hr>

            <div class="row">
              <div class="col" style="padding-right: 6px">
                <a class="btn btn-danger float-right"
                  href="${URL_BASE}/oauth2/authorize/${GRANT_ID}${QUERY_PARAMS}&agreed=0"
                  role="button">${LOC:words.deny}</a>
              </div>

              <div class="col" style="padding-left: 6px">
                <a class="btn btn-success" href="${URL_BASE}/oauth2/authorize/${GRANT_ID}${QUERY_PARAMS}&agreed=1"
                  role="button">${LOC:words.agree}</a>
              </div>
            </div>
          </div>
        </div>

        <div class="col"></div>
      </div>
    </div>
  </main>

  ${HTML_FOOTER}
</body>

</html>